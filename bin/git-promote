#!/bin/sh
#
# Promotes a local topic branch to a remote tracking branch of the same name,
# by pushing and then setting up the git config

set -e

branch=$(git symbolic-ref --short HEAD)

if ! git ls-remote --exit-code --heads origin "$branch" >/dev/null 2>&1; then
  git push --set-upstream origin "$branch"
else
  git branch --set-upstream-to=origin/"$branch"
fi
